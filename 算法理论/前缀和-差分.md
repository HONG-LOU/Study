<font size=4 face="楷体">

## $\mathcal{PREFIX ~~ ALGORITHM ~~~ BY ~~~ HONG-LOU} $

## 前缀和 

### 二维前缀和

$$sum_{x, ~y} = \sum_{i = 1}^{x}\sum_{j = 1}^{y} a_{i, ~j}$$

$$sum_{i, ~j} = sum_{i - 1, ~j} ~ + ~ sum_{i, ~j - 1} ~ - ~ sum_{i - 1, ~j - 1}~+~a_{i, ~j}$$

## 差分
差分是一种和前缀和相对的策略, 可以当作是求和的逆运算.

$$ b_i= \begin{cases} a_i - a_{i - 1}, & \text {$i \in{[2, n]}$} \\ a_1, & \text{$i = 1$} \end{cases} $$

### 性质

$~~~~\bullet$ $a_i$ 的值是 $b_i$ 的前缀和, 即 $$a_n = \sum_{i = 1}^{n} b_i$$

$~~~~\bullet$ 计算 $a_i$ 的前缀和 $$sum = \sum_{i = 1}^n a_i = \sum_{i = 1}^{n}\sum_{j = 1}^ib_j = \sum_i^n~(n - i + 1)~b_i$$

### 使 $[l, ~ r]$ 中的每一个数加上 $k$
$$b_l \leftarrow b_l + k, ~~ b_{r + 1} \leftarrow b_{r+1} - k$$

最后在跑一边前缀和就 $ok$ 啦.